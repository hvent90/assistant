import{r as n,N as h,c as x,j as r,a as f,b as u}from"./index-C2SEiBGk.js";var k=u("block","before:content-[counter(line)]","before:inline-block","before:[counter-increment:line]","before:w-6","before:mr-4","before:text-[13px]","before:text-right","before:text-muted-foreground/50","before:font-mono","before:select-none"),p=n.memo(({children:a,result:e,language:o,className:c,...m})=>{let i=n.useMemo(()=>({backgroundColor:e.bg,color:e.fg}),[e.bg,e.fg]);return r.jsx("pre",{className:u(c,"p-4 text-sm dark:bg-(--shiki-dark-bg)!"),"data-language":o,"data-streamdown":"code-block-body",style:i,...m,children:r.jsx("code",{className:"[counter-increment:line_0] [counter-reset:line]",children:e.tokens.map((d,s)=>r.jsx("span",{className:k,children:d.map((t,l)=>r.jsx("span",{className:"dark:bg-(--shiki-dark-bg)! dark:text-(--shiki-dark)!",style:{color:t.color,backgroundColor:t.bgColor,...t.htmlStyle},...t.htmlAttrs,children:t.content},l))},s))})})},(a,e)=>a.result===e.result&&a.language===e.language&&a.className===e.className),j=({className:a,language:e,style:o,...c})=>r.jsx("div",{className:u("my-4 w-full overflow-hidden rounded-xl border border-border",a),"data-language":e,"data-streamdown":"code-block",style:{contentVisibility:"auto",containIntrinsicSize:"auto 200px",...o},...c}),N=({language:a,children:e})=>r.jsxs("div",{className:"flex items-center justify-between bg-muted/80 p-3 text-muted-foreground text-xs","data-language":a,"data-streamdown":"code-block-header",children:[r.jsx("span",{className:"ml-1 font-mono lowercase",children:a}),r.jsx("div",{className:"flex items-center gap-2",children:e})]}),y=({code:a,language:e,className:o,children:c,...m})=>{let{shikiTheme:i}=n.useContext(h),d=x(),s=n.useMemo(()=>({bg:"transparent",fg:"inherit",tokens:a.split(`
`).map(g=>[{content:g,color:"inherit",bgColor:"transparent",htmlStyle:{},offset:0}])}),[a]),[t,l]=n.useState(s);return n.useEffect(()=>{if(!d){l(s);return}let g=d.highlight({code:a,language:e,themes:i},b=>{l(b)});if(g){l(g);return}l(s)},[a,e,i,d,s]),r.jsx(f.Provider,{value:{code:a},children:r.jsxs(j,{language:e,children:[r.jsx(N,{language:e,children:c}),r.jsx(p,{className:o,language:e,result:t,...m})]})})};export{y as CodeBlock};
